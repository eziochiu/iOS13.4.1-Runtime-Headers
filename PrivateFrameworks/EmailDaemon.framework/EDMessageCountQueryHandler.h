/* Generated by EzioChiu
   Image: /System/Library/PrivateFrameworks/EmailDaemon.framework/EmailDaemon
 */

@interface EDMessageCountQueryHandler : NSObject <EDMailboxChangeHookResponder, EDMessageChangeHookResponder, EFCancelable, EFLoggable, EMMailboxChangeObserver> {
    struct EFAtomicObject { 
        _Atomic long long cfObject; 
    }  _atomicMailboxScopeDescription;
    struct EFAtomicObject { 
        _Atomic long long cfObject; 
    }  _atomicQueryDescription;
    EFCancelationToken * _cancelationToken;
    EFQuery * _expandedQuery;
    EDPersistenceHookRegistry * _hookRegistry;
    long long  _localCount;
    EMObjectID * _mailboxObserverID;
    NSMutableSet * _mailboxesBeingSynced;
    EDMessagePersistence * _messagePersistence;
    NSMutableSet * _newMessageIDs;
    NSString * _pendingFlagChangesKey;
    NSPredicate * _predicateIgnoringFlags;
    EFQuery * _query;
    EDMessageQueryEvaluator * _queryEvaluator;
    _Atomic unsigned long long  _recalculationPending;
    <EMMessageRepositoryCountQueryObserver_xpc> * _resultsObserver;
    long long  _resyncDatabaseGeneration;
    NSMutableSet * _seenMessageIDs;
    struct os_unfair_lock_s { 
        unsigned int _os_unfair_lock_opaque; 
    }  _seenMessageIDsLock;
    EMMailboxScope * _serverCountMailboxScope;
    NSMutableDictionary * _serverCounts;
    EDUpdateThrottler * _updateThrottler;
}

@property (nonatomic, retain) EFCancelationToken *cancelationToken;
@property (readonly, copy) NSString *debugDescription;
@property (readonly, copy) NSString *description;
@property (nonatomic, retain) EFQuery *expandedQuery;
@property (readonly) unsigned long long hash;
@property (nonatomic, retain) EDPersistenceHookRegistry *hookRegistry;
@property (nonatomic) long long localCount;
@property (nonatomic, retain) EDMessagePersistence *messagePersistence;
@property (readonly) NSString *pendingFlagChangesKey;
@property (nonatomic, retain) NSPredicate *predicateIgnoringFlags;
@property (nonatomic, retain) EFQuery *query;
@property (nonatomic, retain) EDMessageQueryEvaluator *queryEvaluator;
@property (nonatomic, retain) <EMMessageRepositoryCountQueryObserver_xpc> *resultsObserver;
@property (nonatomic, readonly) EMMailboxScope *serverCountMailboxScope;
@property (readonly) Class superclass;
@property (nonatomic, retain) EDUpdateThrottler *updateThrottler;

+ (id)defaultScheduler;
+ (id)log;

- (void).cxx_destruct;
- (void)_decrementLocalCount:(long long)arg1 logMessage:(id)arg2 generationWindow:(id)arg3;
- (id)_filterMessages:(id)arg1 potentiallyMatchingMessages:(id*)arg2;
- (void)_fireCountCalculation;
- (void)_incrementLocalCount:(long long)arg1 logMessage:(id)arg2 generationWindow:(id)arg3;
- (bool)_moreThan:(long long)arg1 messagesExistWithMessageIDHeaderHash:(id)arg2;
- (void)_notifyObserverWithLogMessage:(id)arg1;
- (id)_originalMessagesKeyForKey:(id)arg1;
- (void)_persistenceDidDeleteMessages:(id)arg1 includeMessagesWithDeletedFlag:(bool)arg2 generationWindow:(id)arg3;
- (void)_prepareForChangeWithMessages:(id)arg1 changeKey:(id)arg2;
- (void)_processChangedMessages:(id)arg1 changeKey:(id)arg2 generationWindow:(id)arg3;
- (void)_scheduleCountCalculation;
- (void)cancel;
- (id)cancelationToken;
- (void)dealloc;
- (void)didSyncMailbox:(id)arg1;
- (id)expandedQuery;
- (id)hookRegistry;
- (id)initWithQuery:(id)arg1 serverCountMailboxScope:(id)arg2 messagePersistence:(id)arg3 hookRegistry:(id)arg4 observer:(id)arg5;
- (long long)localCount;
- (void)mailboxListChanged:(id)arg1;
- (id)messagePersistence;
- (id)pendingFlagChangesKey;
- (void)persistenceDidAddMessages:(id)arg1 generationWindow:(id)arg2;
- (void)persistenceDidChangeFlags:(id)arg1 messages:(id)arg2 generationWindow:(id)arg3;
- (void)persistenceDidChangeMessageIDHeaderHash:(id)arg1 oldConversationID:(long long)arg2 message:(id)arg3 generationWindow:(id)arg4;
- (void)persistenceDidDeleteMessages:(id)arg1 generationWindow:(id)arg2;
- (void)persistenceDidUpdateLastSyncAndMostRecentStatusCount:(long long)arg1 forMailboxWithObjectID:(id)arg2 generationWindow:(id)arg3;
- (void)persistenceDidUpdateMostRecentStatusCount:(long long)arg1 forMailboxWithObjectID:(id)arg2 generationWindow:(id)arg3;
- (void)persistenceDidUpdateProperties:(id)arg1 message:(id)arg2 generationWindow:(id)arg3;
- (void)persistenceDidUpdateServerCount:(long long)arg1 forMailboxWithObjectID:(id)arg2 generationWindow:(id)arg3;
- (void)persistenceIsAddingMailboxWithDatabaseID:(long long)arg1 objectID:(id)arg2 generationWindow:(id)arg3;
- (void)persistenceWillChangeFlags:(id)arg1 messages:(id)arg2;
- (id)predicateIgnoringFlags;
- (id)query;
- (id)queryEvaluator;
- (id)resultsObserver;
- (id)serverCountMailboxScope;
- (void)setCancelationToken:(id)arg1;
- (void)setExpandedQuery:(id)arg1;
- (void)setHookRegistry:(id)arg1;
- (void)setLocalCount:(long long)arg1;
- (void)setMessagePersistence:(id)arg1;
- (void)setPredicateIgnoringFlags:(id)arg1;
- (void)setQuery:(id)arg1;
- (void)setQueryEvaluator:(id)arg1;
- (void)setResultsObserver:(id)arg1;
- (void)setUpdateThrottler:(id)arg1;
- (id)updateThrottler;
- (void)willSyncMailbox:(id)arg1;

@end
